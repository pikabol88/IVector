# Интерфейсы

## Сборка библиотеки

Для того чтобы можно было использовать функции динамической библиотеки, нужно пометить их соответствующим атрибутом при компиляции.

Эта операция выполняется автоматически при сборке проекта если указать флаг `-DBUILD_INTERFACES`. Этот флаг определяет макрос `BUILD_INTERFACES`, наличие которого сигнализирует о сборке библиотеки. За это автоматическое действие отвечает [этот заголовочный файл](https://github.com/ThinkingFrog/IVector/blob/main/include/Interfacedllexport.h).

В `Code::Blocks` это можно сделать с помощью настроек проекта: `Project -> Build options -> Compiler settings -> #defines`.

В `CLion` это можно сделать указав в файле `CMakeLists.txt` команду `add_definitions(-DBUILD_INTERFACES)`.

В `Visual Studio` это можно сделать в настройках проекта `Project Settings -> C/C++ -> Preprocessor -> Preprocessor definitions`.

## <a name="logger"></a>ILogger

[Интерфейс для логгера](https://github.com/ThinkingFrog/IVector/blob/main/include/ILogger.h). Используется для протоколирования действий и ошибок.
Связанный с ним [класс ошибок](https://github.com/ThinkingFrog/IVector/blob/main/include/RC.h).

### Описание интерфейса

| Метод: `createLogger` | |
|---|---|
| Описание:| Создаёт экземпляр логгера для вывода ошибок в стандартный вывод. |
| Возвращаемое значение:| Указатель на экземпляр логгера, или `nullptr`, если не удалось создать. |

| Метод: `createLogger` | |
|---|---|
| Описание:| Создаёт экземпляр логгера для вывода ошибок в указанный файл. |
| Параметры: | `filename` - имя файла, куда будет выполняться вывод, <br />`overwrite` - флаг, означающий необходимость перезаписи файла, если он существует, иначе данные в файл будут дописаны. Имеет значение по умолчанию `true`. |
| Возвращаемое значение:| Указатель на экземпляр логгера, или `nullptr`, если не удалось создать. |

| Метод: `log` | |
|---|---|
| Описание:| Основной метод вывода ошибок. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`level` - [уровень ошибки](#level), <br />`srcfile` - имя файла, в котором произошла ошибка, <br />`function` - функция, в которой произошла ошибка, <br />`line` - строка, в которой произошла ошибка. |
| Возвращаемое значение:| Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `log` | |
|---|---|
| Описание:| Дополнительный вариант метода `log` для случая, когда не требуется выводить информацию о месте возникновения ошибки. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`level` - [уровень ошибки](#level). |
| Возвращаемое значение:| Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `severe` | |
|---|---|
| Описание:| Аналог метода `log` только с фиксированным [уровнем ошибки](#level) `SEVERE`. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`srcfile` - имя файла, в котором произошла ошибка, <br />`function` - функция, в которой произошла ошибка, <br />`line` - строка, в которой произошла ошибка. |
| Возвращаемое значение:| Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `severe` | |
|---|---|
| Описание:| Дополнительный вариант метода `severe` для случая, когда не требуется выводить информацию о месте возникновения ошибки. |
| Параметры: | `code` - код ошибки из класса ошибок. |
| Возвращаемое значение:| Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `warning` | |
|---|---|
| Описание:| Аналог метода `log` только с фиксированным [уровнем ошибки](#level) `WARNING`. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`srcfile` - имя файла, в котором произошла ошибка, <br />`function` - функция, в которой произошла ошибка, <br />`line` - строка, в которой произошла ошибка. |
| Возвращаемое значение:| Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `warning` | |
|---|---|
| Описание:| Дополнительный вариант метода `warning` для случая, когда не требуется выводить информацию о месте возникновения ошибки. |
| Параметры: | `code` - код ошибки из класса ошибок. |
| Возвращаемое значение:| Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `info` | |
|---|---|
| Описание:| Аналог метода `log` только с фиксированным [уровнем ошибки](#level) `INFO`. |
| Параметры: | `code` - код ошибки из класса ошибок, <br />`srcfile` - имя файла, в котором произошла ошибка, <br />`function` - функция, в которой произошла ошибка, <br />`line` - строка, в которой произошла ошибка. |
| Возвращаемое значение:| Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Метод: `info` | |
|---|---|
| Описание:| Дополнительный вариант метода `info` для случая, когда не требуется выводить информацию о месте возникновения ошибки. |
| Параметры: | `code` - код ошибки из класса ошибок. |
| Возвращаемое значение:| Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`IO_ERROR`, если произошла ошибка в процессе работы с файлом. |

| Перечисление: <a name="level"></a>`Level` | |
|---|---|
| Описание: | Описывает уровни ошибок. |
| Элементы: | `SEVERE` - критическая ошибка, программа прекращает работу, <br />`WARNING` - некритическая ошибка, <br />`INFO` - просто информация. |

## IVector

[Интерфейс для вектора](https://github.com/ThinkingFrog/IVector/blob/main/include/IVector.h) - элемент n-мерного евклидова пространства.

### Аксиомы типа:
- элементы - `double` - не могут быть NaN, Inf, -Inf
- размерность пространства, которому принадлежит вектор, не может быть 0

Аксиомы должны выполняться в любой момент времени, после выполнения любой операции над вектором. Если некая операция приводит к образованию вектора с невалидными коэффициентами, то такая операция должна вернуть исходное состояние вектора, либо, если она создавала новый вектор, вместо нового вектора выдать `nullptr`.

### Описание интерфейса:

| Метод: `createVector` | |
|---|---|
| Описание:| Создаёт экземпляр вектора.|
| Параметры: | `dim` - размерность вектора, <br />`ptr_data` - указатель на массив double, который определяет элементы вектора. Его размер равен `dim`. |
| Возвращаемое значение:| Указатель на экземпляр вектора, или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `copyInstance` | |
|---|---|
| Описание: | Копирует представление одного вектора в другой, если это допустимо. Допустимостью является равенство объёмов памяти и не пересечение блоков памяти, выделенных под объекты. Указатели должны являться указателями на валидные экземпляры вектора, иначе поведение не определено. |
| Параметры: | `dest` - указатель на вектор, куда совершается копирование, <br />`src` - указатель на вектор , откуда совершается копирование. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`MEMORY_INTERSECTION`, если блоки памяти пересекаются, <br />`INVALID_ARGUMENT`, если блоки памяти не подходят по размеру. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `moveInstance` | |
|---|---|
| Описание: | Копирует представление одного вектора в другой, если это допустимо, и удаляет источник данных. Допустимостью является равенство объёмов памяти и не пересечение блоков памяти, выделенных под объекты. Указатели должны являться указателями на валидные экземпляры вектора, иначе поведение не определено. |
| Параметры: | `dest` - указатель на вектор, куда совершается копирование, <br />`src` - указатель на вектор , откуда совершается копирование. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`MEMORY_INTERSECTION`, если блоки памяти пересекаются, <br />`INVALID_ARGUMENT`, если блоки памяти не подходят по размеру. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: <a name="vectorSize"></a>`sizeAllocated` | |
|---|---|
| Описание: | Возвращает объём памяти в байтах, выделенный на хранение вектора как единого блока памяти. |
| Возвращаемое значение: | Количество байт, которое занимает экземпляр вектора. |

__Факт того, что тип реализует операции `copyInstance`, `moveInstance` говорит о том, что экземпляры этого типа можно копировать и перемещать как сырую память размером `sizeAllocated` байтов.__

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию вектора, у которого вызван метод. |
| Возвращаемое значение: | Указатель на экземпляр вектора, или `nullptr`, если не удалось выделить память. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `getData` | |
|---|---|
| Описание: | Возвращает указатель на массив элементов вектора. |
| Возвращаемое значение: | Указатель на массив `double` - элементы вектора. |

| Метод: `setData` | |
|---|---|
| Описание: | Устанавливает новые значения элементов вектора. |
| Параметры: | `dim` - количество элементов массива, <br />`ptr_data` - указатель на массив `double`, который определяет новые элементы вектора. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`MISMATCHING_DIMENSIONS`, если размерность вектора не совпала с размером массива, <br />информацию о невалидности элементов: <br />`NOT_NUMBER` - среди элементов есть NaN, <br />`INFINITY_OVERFLOW` - среди элементов есть Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: <a name="vectorlogger"></a>`setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для вектора. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `getCord` | |
|---|---|
| Описание: | Записывает конкретную компоненту вектора в переменную переданную по ссылке. |
| Параметры: | `index` - индекс элемента вектора, <br />`val` - ссылка на `double` - контейнер под элемент вектора. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит множеству индексов вектора. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `setCord` | |
|---|---|
| Описание: | Устанавливает конкретной компоненте вектора новое значение. |
| Параметры: | `index` - индекс элемента вектора, <br />`val` - новое значение элемента. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит множеству индексов вектора, <br />информацию о невалидности элементов: <br />`NOT_NUMBER` - среди элементов есть NaN, <br />`INFINITY_OVERFLOW` - среди элементов есть Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `scale` | |
|---|---|
| Описание: | Увеличивает каждую компоненту вектора в `multiplier` раз. |
| Параметры: | `multiplier` - множитель, на который умножается каждая компонента. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />информацию о невалидности элементов получаемого вектора: <br />`NOT_NUMBER` - среди элементов есть NaN, <br />`INFINITY_OVERFLOW` - среди элементов есть Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `getDim` | |
|---|---|
| Описание: | Возвращает размерность вектора. |
| Возвращаемое значение: | Размерность вектора. |

| Метод: `inc` и `dec` | |
|---|---|
| Описание: | Приращивает к вектору другой вектор. Аналоги `+=` и `-=`. |
| Параметры: | `op` - вектор, который будет приращён к исходному, у которого вызван метод. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`MISMATCHING_DIMENSIONS`, если размерность вектора не совпала с размером массива, <br />информацию о невалидности элементов получаемого вектора: <br />`NOT_NUMBER` - среди элементов есть NaN, <br />`INFINITY_OVERFLOW` - среди элементов есть Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `add` и `sub` | |
|---|---|
| Описание: | Создаёт новый вектор, который является суммой/разностью двух. |
| Параметры: | `op1` и `op2` - вектора слагаемые. |
| Возвращаемое значение: | Новый вектор, являющийся суммой или `nullptr`, в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `dot` | |
|---|---|
| Описание: | Вычисляет скалярное произведение двух векторов. |
| Параметры: | `op1` и `op2` - вектора - аргументы скалярного произведения. |
| Возвращаемое значение: | Значение скалярного произведения или тихий NAN, в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `equals` | |
|---|---|
| Описание: | Сравнивает вектора с заданной точностью и заданной метрикой. |
| Параметры: | `op1` и `op2` - вектора, которые будут сравниваться, <br />`n` - [норма](#vectorNorm), по которой будет измерена разность векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | `true`, если вектора равны с данной точностью по данной метрике, и `false`, если не равны. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `norm` | |
|---|---|
| Описание: | Вычисляет норму вектора. |
| Параметры: | `n` - [норма](#vectorNorm). |
| Возвращаемое значение: | Значение нормы или тихий NAN, в случае ошибки. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `applyFunction` | |
|---|---|
| Описание: | Изменяет компоненты вектора согласно переданной функции. |
| Параметры: | `fun` - функция действующая из R -> R (`double(double)`), определяющая изменение каждой компоненты: `el = fun(el)`. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />информацию о невалидности элементов получаемого вектора: <br />`NOT_NUMBER` - среди элементов есть NaN, <br />`INFINITY_OVERFLOW` - среди элементов есть Inf/-Inf. <br />Подробная информация пишется в [логгер](#vectorlogger). |

| Метод: `foreach` | |
|---|---|
| Описание: | Выполняет процедуру над каждой компонентой вектора. |
| Параметры: | `fun` - процедура (`void(double)`), определяющая обработку каждой компоненты вектора. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. |

| Перечисление: <a name="vectorNorm"></a>`NORM` | |
|---|---|
| Описание: | Описывает нормы, которые поддерживаются реализацией вектора. |
| Элементы: | `CHEBYSHEV` - бесконечная p-норма. Чебышевская норма, <br />`FIRST` - первая p-норма. Манхэттенская норма, <br />`SECOND` - вторая p-норма. Евклидова норма, <br />`AMOUNT` - количество норм в перечислении. |

### Замечания по реализации:

- Реализация вектора должна быть подобна массиву примитивов - один непрерывный блок памяти содержащий элементы вектора и метаинформацию о векторе. Размер блока клиентский код должен иметь возможность получить из [метода](#vectorSize) `sizeAllocated`.
- Деструктор чисто виртуальный намеренно, чтобы подчеркнуть абстрактность типа `IVector`

## ISet

[Интерфейс для контейнера - множество векторов](https://github.com/ThinkingFrog/IVector/blob/main/include/ISet.h), которые хранятся в хронологической последовательности. Множество хранит вектора одной размерности, которая определяется первым вектором переданным на хранение.

### Описание интерфейса:

| Метод: `createSet` | |
|---|---|
| Описание:| Создаёт экземпляр множества.|
| Возвращаемое значение:| Указатель на экземпляр множества, или nullptr, если не удалось создать. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию множества, у которого вызван метод. |
| Возвращаемое значение: | Указатель на экземпляр множества, или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: <a name="setlogger"></a>`setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для множества. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `makeIntersection` | |
|---|---|
| Описание: | Создаёт новое множество как пересечение двух множеств. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества, чьё пересечение будет построено, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | Новое множество, являющееся пересечением или `nullptr`, в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `makeUnion` | |
|---|---|
| Описание: | Создаёт новое множество как объединение двух множеств. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества, чьё объединение будет построено, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | Новое множество, являющееся объединением или `nullptr`, в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `sub` | |
|---|---|
| Описание: | Создаёт новое множество как разность двух множеств. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества, чья разность будет построена, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | Новое множество, являющееся разностью или `nullptr`, в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `symSub` | |
|---|---|
| Описание: | Создаёт новое множество как симметрическую разность двух множеств. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества, чья симметрическая разность будет построена, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | Новое множество, являющееся симметрической разностью или `nullptr`, в случае возникновения ошибки. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `equals` | |
|---|---|
| Описание: | Сравнивает два множества. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества, которые проверяются на равенство, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | `true`, если множества равны с данной точностью по данной метрике, и `false`, если не равны. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `subSet` | |
|---|---|
| Описание: | Проверяет: является ли множство `op1` подмножеством `op2`. Равенство векторов проверяется согласно переданной норме и точности. |
| Параметры: | `op1` и `op2` - множества, которые проверяются на вложенность, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | `true`, если `op1` является подмножеством `op2`, и `false`, если не является. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getDim` | |
|---|---|
| Описание: | Возвращает размерность векторов в множестве. |
| Возвращаемое значение: | Размерность векторов. |

| Метод: `getSize` | |
|---|---|
| Описание: | Возвращает количество векторов в множестве. Если множество только создано (не был добавлен ни один вектор) возвращает 0. |
| Возвращаемое значение: | Количество векторов. |

| Метод: `findFirst` | |
|---|---|
| Описание: | Проверяет наличие во множестве вектора, равного данному по заданной норме с некоторой точностью. |
| Параметры: | `pat` - вектор, который ищет метод, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `pat` не совпала с размерностью множества, <br />`VECTOR_NOT_FOUND`, если не удалось найти вектор, <br />`INVALID_ARGUMENT`, если аргумент имеет не допустимое значение (`NORM::AMOUNT` или `tol < 0.0`), <br />информацию о невалидности точности: <br />`NOT_NUMBER` - точность является NaN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getCopy` | |
|---|---|
| Описание: | Возвращает копию вектора по индексу. Метод записывает в переданный по ссылке указатель адрес копии вектора. |
| Параметры: | `index` - индекс вектора, <br />`val` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит индексам множества, <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `findFirstAndCopy` | |
|---|---|
| Описание: | Находит первый вектор равный данному с некоторой точностью. Метод записывает в переданный по ссылке указатель адрес копии найденного вектора. |
| Параметры: | `pat` - вектор, который ищет метод, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора, <br />`val` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор, <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `pat` не совпала с размерностью множества, <br />`VECTOR_NOT_FOUND`, если не удалось найти вектор, <br />`INVALID_ARGUMENT`, если аргумент имеет не допустимое значение (`NORM::AMOUNT` или `tol < 0.0`), <br />информацию о невалидности точности: <br />`NOT_NUMBER` - точность является NaN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getCoords` | |
|---|---|
| Описание: | Записывает элементы вектора, соответствующего индексу, в буферный вектор. |
| Параметры: | `index` - индекс вектора, <br />`val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит индексам множества, <br />`MISMATCHING_DIMENSIONS`, если размерность буферного вектора `val` не совпала с размерностью множества. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `findFirstAndCopyCoords` | |
|---|---|
| Описание: | Находит первый вектор равный данному с некоторой точностью. Метод записывает элементы найденного вектора в буферный вектор. |
| Параметры: | `pat` - вектор, который ищет метод, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора, <br />`val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `pat` или `val` не совпала с размерностью множества, <br />`VECTOR_NOT_FOUND`, если не удалось найти вектор, <br />`INVALID_ARGUMENT`, если аргумент имеет не допустимое значение (`NORM::AMOUNT` или `tol < 0.0`), <br />информацию о невалидности точности: <br />`NOT_NUMBER` - точность является NaN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `insert` | |
|---|---|
| Описание: | Добавляет новый вектор в множество, если такого вектора в множестве нет. Сравнение происходит по норме с некоторой точностью. |
| Параметры: | `val` - вектор, который добавляется в множество, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `val` не совпала с размерностью множества, <br />`VECTOR_ALREADY_EXIST`, если вектор `val` уже существует во множестве, <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор, <br />`INVALID_ARGUMENT`, если аргумент имеет не допустимое значение (`NORM::AMOUNT` или `tol < 0.0`), <br />информацию о невалидности точности: <br />`NOT_NUMBER` - точность является NaN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `remove` | |
|---|---|
| Описание: | Удаляет вектор по индексу. |
| Параметры: | `index` - индекс вектора. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`INDEX_OUT_OF_BOUND`, если индекс не принадлежит индексам множества. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `remove` | |
|---|---|
| Описание: | Находит первый вектор равный данному с некоторой точностью и удаляет его. |
| Параметры: | `pat` - вектор, который ищет метод, <br />`n` - [норма](#vectorNorm), которая будет использована для сравнения векторов,  <br />`tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`, <br />`VECTOR_NOT_FOUND`, если не удалось найти вектор, <br />`MISMATCHING_DIMENSIONS`, если размерность вектора `val` не совпала с размерностью множества, <br />`INVALID_ARGUMENT`, если аргумент имеет не допустимое значение (`NORM::AMOUNT` или `tol < 0.0`), <br />информацию о невалидности точности: <br />`NOT_NUMBER` - точность является NaN, <br />`INFINITY_OVERFLOW` - точность является Inf/-Inf. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getIterator` | |
|---|---|
| Описание: | Создаёт итератор, соответствующий индексу в множестве. |
| Параметры: | `index` - индекс вектора в множестве. |
| Возвращаемое значение: | Указатель на экземпляр итератора или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getBegin` | |
|---|---|
| Описание: | Создаёт итератор на начало в множестве. |
| Возвращаемое значение: | Указатель на экземпляр итератора или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getEnd` | |
|---|---|
| Описание: | Создаёт итератор на конец в множестве. Конец - последний добавленный вектор. |
| Возвращаемое значение: | Указатель на экземпляр итератора или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setlogger). |

## Итератор множества: `ISet::IIterator`

Интерфейс итератора по множеству.

### Описание интерфейса итератора:

| Метод: `getNext` | |
|---|---|
| Описание: | Создаёт итератор, сдвинутый на несколько шагов вперёд. |
| Параметры: | `indexInc` - количество шагов, на которое нужно сдвинуть вперёд итератор. |
| Возвращаемое значение: | Указатель на экземпляр итератора или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `getPrevious` | |
|---|---|
| Описание: | Создаёт итератор, предшествующий текущему итератору. |
| Параметры: | `indexInc` - количество шагов, на которое нужно сдвинуть назад итератор. |
| Возвращаемое значение: | Указатель на экземпляр итератора или `nullptr`, если произошла ошибка. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию итератора, у которого вызван метод. |
| Возвращаемое значение: | Указатель на экземпляр итератора или `nullptr`, если не удалось создать. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: <a name="setitlogger"></a>`setLogger` | |
|---|---|
| Описание: | Устанавливает [логгер](#logger) для итератора. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибках. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`. |

| Метод: `next` | |
|---|---|
| Описание: | Сдвигает итератор вперёд. |
| Параметры: | `indexInc` - количество шагов, на которое нужно сдвинуть вперёд итератор. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`INDEX_OUT_OF_BOUND`, если полученный итератор вышел за границу множества, <br />`SOURCE_SET_DESTROYED`, если множество было уничтожено. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `previous` | |
|---|---|
| Описание: | Сдвигает итератор назад. |
| Параметры: | `indexInc` - количество шагов, на которое нужно сдвинуть назад итератор. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`INDEX_OUT_OF_BOUND`, если полученный итератор вышел за границу множества, <br />`SOURCE_SET_DESTROYED`, если множество было уничтожено. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `isValid` | |
|---|---|
| Описание: | Проверяет валидность итератора. |
| Возвращаемое значение: | `true`, если итератор ссылается на вектор в множестве, <br />`false`, если итератор вышел за границы множества в процессе операции `next`, `previous`. В случае ошибки также возвращается `false`. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `makeBegin` | |
|---|---|
| Описание: | Переводит итератор в начало множества. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`SOURCE_SET_EMPTY`, если множество пусто, <br />`SOURCE_SET_DESTROYED`, если множество было уничтожено. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `makeEnd` | |
|---|---|
| Описание: | Переводит итератор в конец множества. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`SOURCE_SET_EMPTY`, если множество пусто, <br />`SOURCE_SET_DESTROYED`, если множество было уничтожено. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `getVectorCopy` | |
|---|---|
| Описание: | Создаёт копию вектора, на который указывает итератор. Метод записывает в переданный по ссылке указатель адрес копии вектора. |
| Параметры: | `val` - ссылка на указатель на вектор, куда будет записан адрес копии. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`ALLOCATION_ERROR`, если не удалось выделить память под вектор. <br />Подробная информация пишется в [логгер](#setitlogger). |

| Метод: `getVectorCoords` | |
|---|---|
| Описание: | Записывает элементы вектора, на который указывает итератор, в буферный вектор. |
| Параметры: | `val` - буферный вектор, куда будут записаны данные. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`NULLPTR_ERROR`, если аргументы метода оказались `nullptr`<br />`MISMATCHING_DIMENSIONS`, если размерность вектора `val` не совпала с размерностью вектора, на который ссылается итератор. <br />Подробная информация пишется в [логгер](#setitlogger). |

### Замечания по реализации:
- Храним не сами вектора, а только существенную часть вектора - массив элементов.
- Изменение размера контейнера при нехватке выделенной памяти выполняем скрыто от клиентского кода во время выполнения метода `insert`. В связи с реалокациями не можем хранить реализацию интерфейса в виде единого блока памяти (как в случае с вектором), но сами вектора хранящиеся в контейнере - можем.
- Память выделяем по слудующей схеме: изначально выделяется какой-то фиксированный размер, затем при каждой реалокации увеличиваем объём выделенной памяти вдвое.
- Опять же в связи с реалокациями скрытыми от пользователя, не можем возвращать shallow копии векторов - получение ресурса сопровождается созданием нового вектора или копированием данных в некоторый буфферный вектор (касается методов `get...`, `findFirst...`, метода `get...` итератора).
- Деструктор чисто виртуальный намеренно, аналогично `IVector`.

### Описание связи итератора и множества:
- В множестве хранится массив уникальных индексов, которые присваиваются векторам при добавлении. Индексы уникальны, поэтому повторяться не могут. После удаления вектора, его индекс больше не может быть присвоен другому вектору.
- Каждый итератор при конструировании получает от своего множества контрольный блок. Общение итератора и множества происходит через этот контрольный блок, который разделяется между итераторами. Контрольный блок существует до тех пор, пока существует хоть 1 итератор, связанный с ним, или множество, связанное с ним.

## Контрольный блок: `ISetControlBlock`

[Интерфейс контрольного блока](https://github.com/ThinkingFrog/IVector/blob/main/include/ISetControlBlock.h).

### Описание интерфейса контрольного блока:

| Метод: `getNext` | |
|---|---|
| Описание: | Реализует получение вектора, отстоящего на несколько шагов вперёд. Новый уникальный индекс будет записан в переменную `index`, полученную по ссылке, а данные вектора будут записаны в буферный вектор. В случае, если операция выводит итератор за границы массива, итератор должен быть помечен не валидным, в `index` должно быть записано максимальное значение. |
| Параметры: | `vec` - буферный вектор, куда будут записаны элементы вектора, который запрашивается итератором, <br />`index` - уникальный индекс вектора, передаётся как ссылка на текущий индекс вектора, чтобы после получения ресурса этот индекс изменился на новый, соответствующий полученному вектору, <br />`indexInc` - число элементов, на которое хотим сместить вперёд итератор. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`INDEX_OUT_OF_BOUND`, если итератор запрашивает данные на элемент за границами множества, <br />`SOURCE_SET_DESTROYED`, если итератор запрашивает данные у множества, которое уничтожено. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getPrevious` | |
|---|---|
| Описание: | Реализует получение вектора, отстоящего на несколько шагов назад. Новый уникальный индекс будет записан в переменную `index`, полученную по ссылке, а данные вектора будут записаны в буферный вектор. В случае, если операция выводит итератор за границы массива, итератор должен быть помечен не валидным, в `index` должно быть записано максимальное значение. |
| Параметры: | `vec` - буферный вектор, куда будут записаны элементы вектора, который запрашивается итератором, <br />`index` - уникальный индекс вектора, передаётся как ссылка на текущий индекс вектора, чтобы после получения ресурса этот индекс изменился на новый, соответствующий полученному вектору, <br />`indexInc` - число элементов, на которое хотим сместить назад итератор. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`INDEX_OUT_OF_BOUND`, если итератор запрашивает данные на элемент за границами множества, <br />`SOURCE_SET_DESTROYED`, если итератор запрашивает данные у множества, которое уничтожено. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getBegin` | |
|---|---|
| Описание: | Реализует получение вектора, расположенного в начале множества. Новый уникальный индекс будет записан в переменную `index`, полученную по ссылке, а данные вектора будут записаны в буферный вектор. |
| Параметры: | `vec` - буферный вектор, куда будут записаны элементы вектора, который запрашивается итератором, <br />`index` - уникальный индекс вектора, передаётся как ссылка на текущий индекс вектора, чтобы после получения ресурса этот индекс изменился на новый, соответствующий полученному вектору. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`SOURCE_SET_EMPTY`, если множество пусто, <br />`SOURCE_SET_DESTROYED`, если итератор запрашивает данные у множества, которое уничтожено. <br />Подробная информация пишется в [логгер](#setlogger). |

| Метод: `getEnd` | |
|---|---|
| Описание: | Реализует получение вектора, расположенного в конце множества. Новый уникальный индекс будет записан в переменную `index`, полученную по ссылке, а данные вектора будут записаны в буферный вектор. |
| Параметры: | `vec` - буферный вектор, куда будут записаны элементы вектора, который запрашивается итератором, <br />`index` - уникальный индекс вектора, передаётся как ссылка на текущий индекс вектора, чтобы после получения ресурса этот индекс изменился на новый, соответствующий полученному вектору. |
| Возвращаемое значение: | Код ошибки. <br />`SUCCESS` в случае успеха. <br />Может вернуть: <br />`SOURCE_SET_EMPTY`, если множество пусто, <br />`SOURCE_SET_DESTROYED`, если итератор запрашивает данные у множества, которое уничтожено. <br />Подробная информация пишется в [логгер](#setlogger). |

## ICompact

[Интерфейс для n-мерного замкнутого параллелепипеда - компакта](https://github.com/ThinkingFrog/IVector/blob/main/include/ICompact.h) в n-мерном евклидовом пространстве.

Фактически представляет собой сетку, которая заданна двумя векторами, содержащими информацию о границах параллелепипеда, и вектором с целочисленными компонентами ([Мультииндекс](https://github.com/ThinkingFrog/IVector/blob/main/include/IMultiIndex.h)), который задаёт число разбиений сетки по каждой оси.

### Замечания по интерфейсу:
- получение ресурса аналогично `ISet`: имеется 2 варианта по семантике получения ресурса
- деструктор чисто виртуальный намеренно, аналогично `IVector`
- метод `createCompactSpan` создаёт наименьший компакт, содержащий переданные 2 компакта
- конкретный узел сетки можно получить передав в соответствующий метод (`getVectorzCopy` или `getVectorCoords`) мультииндекс этого узла

## IProblem, IDiffProblem

[Интерфейс целевой функции](https://github.com/ThinkingFrog/IVector/blob/main/include/IProblem.h) и [дифференцируемой целевой функции](https://github.com/ThinkingFrog/IVector/blob/main/include/IDiffProblem.h).

Определяется двумя компактами: область определения аргумента и подмножество параметрического пространства.

### Замечания по интерфейсу:
- значения функции и её производные вычисляются в 2 этапа: фиксируется методом `set...` параметры или аргументы, затем вычисляется значение или производная по параметру или аргументу
- метод `derivativeBy...` вычисляет частную производную по аргументу. Частная производная определяется по мультииндексу (сколько раз по какой оси брать производную)
